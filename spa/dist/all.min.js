window.onload=function(){!function(){if(document.getElementsByClassName){var e=document.getElementsByClassName("class-name");console.log(e),console.log(e[0].className);for(var t=0,o=0;o<e.length;o++)e[o].index=o,console.log(e[o].index),e[o].addEventListener("click",function(){e[t].classList.remove("active"),this.classList.add("active"),t=this.index,console.log("---")})}}();var e=[{title:"one-more",view_count:1e4},{title:"two-more",view_count:666},{title:"three-more",view_count:485},{title:"again",view_count:627},{title:"again-and-again",view_count:896},{title:"这是一个测试！超长标题测试！测试！测试！测试！",view_count:896},{title:"html5",view_count:66},{title:"阿斯顿飞asdfasdf手动阀水电费",view_count:8}];window.onscroll=function(){var t=document.getElementById("to-top");if(document.documentElement.scrollHeight<=window.innerHeight+document.body.scrollTop){var o=(document.getElementById("box"),document.getElementById("template").innerHTML),n=Mustache.render(o,{data:e});document.getElementById("box").insertAdjacentHTML("beforeEnd",n)}else document.body.scrollTop>200?(t.style.visibility="visible",t.style.transition="opacity 3s",t.style.opacity="1"):(t.style.visibility="hidden",t.style.opacity="0")},0===document.body.scrollTop&&(console.log("触发滚动"),move_event={},document.getElementById("box").addEventListener("touchstart",function(e){move_event.start=e.touches[0].pageY}),document.getElementById("box").addEventListener("touchmove",function(e){if(move_event.move=e.touches[0].pageY,0===document.body.scrollTop&&(console.log("可触发上拉刷新"),move_event.move-move_event.start>10)){var t=document.getElementById("refresh");t.style.display="block",t.style.marginTop=move_event.move-move_event.start+"px",t.style.marginTop.match(/\d+/g)[0]>90&&(t.style.marginTop="90px")}}),document.getElementById("box").addEventListener("touchend",function(e){var t=document.getElementById("refresh");if(document.body.scrollTop>0)t.style.marginTop?console.log("has"):console.log("has not");else if(console.log("触发这个"),t.style.marginTop.match(/\d+/g)[0]<90)var o=setInterval(function(){t.style.marginTop=t.style.marginTop.match(/\d+/g)[0]-2+"px",t.style.marginTop.match(/\d+/g)[0]<=0&&clearInterval(o),t.style.marginTop<"0px"&&(t.style.display="none")},10);else console.log("触发1.8秒刷新"),setTimeout(function(){window.location.reload(!1)},1800)}))};