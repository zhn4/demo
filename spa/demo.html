<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <style>
  div{
    position: absolute;
    top:0px;
    bottom:0px;
    width:100%;
    left:0px;
    overflow: hidden;
  }
  li{
    list-style-type: none;
    height:35px;
    background: #ccc;
    border-bottom: solid 1px #fff;
    text-align: left;
    line-height: 35px;
    padding-left:15px;
  }
  ul{
    width:100%;
    margin-top:0px;
    position: absolute;
    left:0px;
    padding:0px;
    top:0px;
  }
  </style>
</head>
<body>
  <div class="outerScroller">
    <ul class = 'scroll'>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
      <li>6</li>
      <li>7</li>
      <li>8</li>
      <li>9</li>
      <li>10</li>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
      <li>6</li>
      <li>7</li>
      <li>8</li>
      <li>9</li>
      <li>10</li>
    </ul>
  </div>
  <script>
  var scroll = document.querySelector('.scroll'); // 需要滚动的元素
  var outerScroller = document.querySelector('.outerScroller'); // 滚动元素的父元素
  var touchStart = 0; // 开始位置
  var touchDis = 0; //

  // 监听父元素的touchstart事件
  outerScroller.addEventListener('touchstart', function(event) {
    var touch = event.targetTouches[0];
    touchStart = touch.pageY;// 把元素放在手指所在的位置
    console.log(touchStart);
  }, false);

  // 监听父元素的touchmove事件
  outerScroller.addEventListener('touchmove', function(event) {
    var touch = event.targetTouches[0];
    console.log(touch.pageY + 'px');
    scroll.style.top = scroll.offsetTop + touch.pageY-touchStart + 'px';// 列表随手指滑动距离发生位移
    console.log(scroll.style.top);
    touchStart = touch.pageY;
    touchDis = touch.pageY-touchStart;
  }, false);

  // 监听父元素的touchend事件
  outerScroller.addEventListener('touchend', function(event) {
    touchStart = 0;
    var top = scroll.offsetTop;
    console.log(top);
    if(top>70)refresh();
    if(top>0){
      var time = setInterval(function() {
        scroll.style.top = scroll.offsetTop -2+'px';// 回弹效果
        if(scroll.offsetTop<=0)clearInterval(time);// 判断是否回到顶部,未回到顶部不断回调time函数
      },1)
    }
  }, false);

  // 刷新功能
  function refresh(){
    console.log('refresh...');
    setTimeout(function() {
      window.location.reload(false);
    }, 1800);
  }

  // 加载功能
  function load(){
    console.log('loading...')
    for(var i = 10;i>0;i--) {
      var node = document.createElement("li");
      node.innerHTML = "I'm new";
      scroll.insertBefore(node,scroll.firstChild);
    }
  }
  </script>
</body>
</html>
